import{d as E,r as d,a as v,c as y,o as l,b as t,w as s,e as o,f as r,g as F,h as K,m as p,F as R,E as g,_ as T}from"./index-ONXd2yip.js";import{a as A,t as B,e as U}from"./stockAnalysis-72SBhG5I.js";import{e as N}from"./errors-BvGLt0H_.js";import{S as z}from"./StockAdvicePanel-0uHkC2oq.js";import{K as L}from"./KLineChart-Bpe7rvZr.js";const M={class:"stock-structured"},P={class:"kline-wrap"},$=E({__name:"StockStructuredView",setup(q){const u=d(),n=v({stockCode:""}),m=d(!1),c=d(null),i=d([]),C=v({stockCode:[{required:!0,message:"请输入股票代码",trigger:"blur"},{pattern:/^[A-Za-z]{1,10}$/,message:"仅支持 1-10 位英文字母的股票代码",trigger:"blur"}]});async function _(){if(u.value){try{await u.value.validate()}catch{return}m.value=!0;try{const a=n.stockCode.trim().toUpperCase(),e=await A({stockCode:a,analysisType:"STRUCTURED"});c.value=B(e.analysis),i.value=U(e.analysis),g.success(`已生成 ${a} 的结构化分析`)}catch(a){c.value=null,i.value=[],g.error(N(a))}finally{m.value=!1}}}return(a,e)=>{const b=o("el-input"),f=o("el-form-item"),h=o("el-button"),w=o("el-form"),x=o("el-divider"),k=o("el-empty"),S=o("el-card");return l(),y("div",M,[t(S,{class:"form-card",shadow:"hover"},{header:s(()=>[...e[1]||(e[1]=[r("div",{class:"card-title"},"结构化分析",-1)])]),default:s(()=>[t(w,{ref_key:"stockFormRef",ref:u,model:n,rules:C,"label-position":"top",class:"analysis-form"},{default:s(()=>[t(f,{label:"股票代码",prop:"stockCode"},{default:s(()=>[t(b,{modelValue:n.stockCode,"onUpdate:modelValue":e[0]||(e[0]=V=>n.stockCode=V),maxlength:"10",placeholder:"示例：AAPL",onKeyup:F(_,["enter"])},null,8,["modelValue"])]),_:1}),t(f,null,{default:s(()=>[t(h,{type:"primary",loading:m.value,onClick:_},{default:s(()=>[...e[2]||(e[2]=[K("生成结构化分析",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),t(x),r("section",null,[e[4]||(e[4]=r("h3",{class:"section-title"},"结构化速览",-1)),c.value?(l(),y(R,{key:1},[t(z,{data:c.value},null,8,["data"]),r("div",P,[e[3]||(e[3]=r("h4",{class:"section-sub-title"},"提取的K线",-1)),i.value.length?(l(),p(L,{key:1,candles:i.value,height:420},null,8,["candles"])):(l(),p(k,{key:0,description:"无时间序列"}))])],64)):(l(),p(k,{key:0,description:"提交股票代码后将显示结构化要点"}))])]),_:1})])}}}),G=T($,[["__scopeId","data-v-00456610"]]);export{G as default};
