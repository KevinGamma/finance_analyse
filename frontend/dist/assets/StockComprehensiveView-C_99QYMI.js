import{d as S,r as d,a as f,c as k,o as u,b as o,w as s,e as t,f as a,g as A,h as B,m as F,t as m,k as v,E as y,_ as N}from"./index-ONXd2yip.js";import{a as M}from"./stockAnalysis-72SBhG5I.js";import{f as T,t as q}from"./display-CuAyYhFG.js";import{e as z}from"./errors-BvGLt0H_.js";const D={class:"stock-comprehensive"},I={key:1,class:"analysis-result"},K={class:"analysis-result__meta"},L=S({__name:"StockComprehensiveView",setup(P){const c=d(),l=f({stockCode:""}),i=d(!1),r=d(null),C=f({stockCode:[{required:!0,message:"请输入股票代码",trigger:"blur"},{pattern:/^[A-Za-z]{1,10}$/,message:"仅支持 1-10 位英文字母的股票代码",trigger:"blur"}]});async function p(){if(c.value){try{await c.value.validate()}catch{return}i.value=!0;try{const n=l.stockCode.trim().toUpperCase(),e=await M({stockCode:n,analysisType:"COMPREHENSIVE"});r.value=e,l.stockCode="",y.success(`已生成 ${e.stockCode} 的综合分析`)}catch(n){y.error(z(n))}finally{i.value=!1}}}return(n,e)=>{const g=t("el-input"),_=t("el-form-item"),b=t("el-button"),h=t("el-form"),V=t("el-divider"),w=t("el-empty"),x=t("el-scrollbar"),E=t("el-card");return u(),k("div",D,[o(E,{class:"form-card",shadow:"hover"},{header:s(()=>[...e[1]||(e[1]=[a("div",{class:"card-title"},"综合分析",-1)])]),default:s(()=>[o(h,{ref_key:"stockFormRef",ref:c,model:l,rules:C,"label-position":"top",class:"analysis-form"},{default:s(()=>[o(_,{label:"股票代码",prop:"stockCode"},{default:s(()=>[o(g,{modelValue:l.stockCode,"onUpdate:modelValue":e[0]||(e[0]=R=>l.stockCode=R),maxlength:"10",placeholder:"示例：AAPL",onKeyup:A(p,["enter"])},null,8,["modelValue"])]),_:1}),o(_,null,{default:s(()=>[o(b,{type:"primary",loading:i.value,onClick:p},{default:s(()=>[...e[2]||(e[2]=[B("生成综合分析",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),o(V),a("section",null,[e[3]||(e[3]=a("h3",{class:"section-title"},"最新综合分析结果",-1)),r.value?(u(),k("div",I,[a("p",K,[a("strong",null,m(r.value.stockCode),1),a("span",null,m(v(T)(r.value.requestedAt)),1)]),o(x,{class:"analysis-result__scroll"},{default:s(()=>[a("pre",null,m(v(q)(r.value.analysis)),1)]),_:1})])):(u(),F(w,{key:0,description:"提交股票代码后将显示分析报告"}))])]),_:1})])}}}),Z=N(L,[["__scopeId","data-v-859cad37"]]);export{Z as default};
