import{d as re,l as Q,c as S,m as B,o as m,b as l,e as y,w as e,f as n,t as s,h as o,n as $,F as M,p as H,_ as ue,q as ce,r as U,a as se,s as _e,E as Z,g as me,k as G}from"./index-B3MdEmXe.js";import{f as ae,t as ne}from"./display-CuAyYhFG.js";import{e as te}from"./errors-BvGLt0H_.js";const pe={key:0,class:"stock-advice-panel"},fe={class:"card-hd"},ve={class:"title"},ye={class:"code"},ge={class:"name"},be={class:"card-hd"},ke={class:"card-hd"},he={key:0,class:"sr-box mt8"},we={class:"mt8"},Ce={key:0},Se={class:"headline-title"},Te={class:"advice-group"},$e={class:"advice-block"},ze={class:"advice-body"},Ae={class:"tags"},Re={class:"tags"},Ee={class:"tags"},Ve={class:"tags"},De={class:"advice-block"},Ne={class:"advice-body"},Ue={class:"tags"},Fe={class:"tags"},Le={class:"tags"},Me={class:"tags"},He={class:"advice-block"},Ie={class:"advice-body"},qe={class:"muted"},Be={key:0,class:"risk-warning"},Je=re({__name:"StockAdvicePanel",props:{data:{}},setup(R){const g=R,A=Q(()=>{var w,C,z,E;const a=(C=(w=g.data)==null?void 0:w.price_data)==null?void 0:C.daily_change,d=(E=(z=g.data)==null?void 0:z.price_data)==null?void 0:E.daily_change_percent;if(a==null&&d==null)return"-";const p=(a??0)>=0?"+":"",r=(a??0).toFixed(2),h=d!=null?` (${p}${d.toFixed(2)}%)`:"";return`${p}${r}${h}`}),D=Q(()=>{var d,p;const a=((p=(d=g.data)==null?void 0:d.price_data)==null?void 0:p.daily_change)??0;return a>0?"success":a<0?"danger":"info"}),J=Q(()=>{var p,r,h,w,C,z,E,F;const a=((w=(h=(r=(p=g.data)==null?void 0:p.technical_analysis)==null?void 0:r.support_resistance)==null?void 0:h.support)==null?void 0:w.length)??0,d=((F=(E=(z=(C=g.data)==null?void 0:C.technical_analysis)==null?void 0:z.support_resistance)==null?void 0:E.resistance)==null?void 0:F.length)??0;return a>0||d>0}),P=Q(()=>{var a,d;return(((d=(a=g.data)==null?void 0:a.news_sentiment)==null?void 0:d.news_count)??0)>0});function _(a){return typeof a=="number"?Number(a).toFixed(2):"-"}function N(a){return typeof a=="number"?Intl.NumberFormat().format(a):"-"}function O(a){if(!a)return"-";const d=new Date(a);return Number.isNaN(d.getTime())?a:d.toLocaleString()}function I(a){if(!a)return"info";const d=a.toLowerCase();return d.includes("pos")?"success":d.includes("neg")?"danger":"info"}return(a,d)=>{const p=y("el-tag"),r=y("el-descriptions-item"),h=y("el-descriptions"),w=y("el-card"),C=y("el-col"),z=y("el-row"),E=y("el-empty"),F=y("el-alert");return a.data?(m(),S("div",pe,[l(z,{gutter:16},{default:e(()=>[l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[n("div",fe,[d[0]||(d[0]=n("span",null,"基础信息",-1)),a.data.timezone?(m(),$(p,{key:0,size:"small",type:"info"},{default:e(()=>[o(s(a.data.timezone),1)]),_:1})):B("",!0)])]),default:e(()=>{var t,i;return[n("div",ve,[n("span",ye,s(((t=a.data.stock)==null?void 0:t.code)||"-"),1),n("span",ge,s(((i=a.data.stock)==null?void 0:i.name)||""),1)]),l(h,{column:2,size:"small",border:""},{default:e(()=>[l(r,{label:"市场"},{default:e(()=>{var f;return[o(s(((f=a.data.stock)==null?void 0:f.market)||"-"),1)]}),_:1}),l(r,{label:"货币"},{default:e(()=>{var f;return[o(s(((f=a.data.stock)==null?void 0:f.currency)||"-"),1)]}),_:1}),l(r,{label:"行业"},{default:e(()=>{var f;return[o(s(((f=a.data.stock)==null?void 0:f.industry)||"-"),1)]}),_:1}),l(r,{label:"板块"},{default:e(()=>{var f;return[o(s(((f=a.data.stock)==null?void 0:f.sector)||"-"),1)]}),_:1}),l(r,{label:"日期",span:2},{default:e(()=>[o(s(O(a.data.date)),1)]),_:1})]),_:1})]}),_:1})]),_:1}),l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[n("div",be,[d[1]||(d[1]=n("span",null,"价格概览",-1)),l(p,{size:"small",type:D.value},{default:e(()=>[o(s(A.value),1)]),_:1},8,["type"])])]),default:e(()=>[l(h,{column:3,size:"small",border:""},{default:e(()=>[l(r,{label:"开盘"},{default:e(()=>{var t;return[o(s(_((t=a.data.price_data)==null?void 0:t.open)),1)]}),_:1}),l(r,{label:"收盘"},{default:e(()=>{var t;return[o(s(_((t=a.data.price_data)==null?void 0:t.close)),1)]}),_:1}),l(r,{label:"昨收"},{default:e(()=>{var t;return[o(s(_((t=a.data.price_data)==null?void 0:t.prev_close)),1)]}),_:1}),l(r,{label:"最高"},{default:e(()=>{var t;return[o(s(_((t=a.data.price_data)==null?void 0:t.high)),1)]}),_:1}),l(r,{label:"最低"},{default:e(()=>{var t;return[o(s(_((t=a.data.price_data)==null?void 0:t.low)),1)]}),_:1}),l(r,{label:"波动幅度"},{default:e(()=>{var t,i;return[o(s(_((i=(t=a.data.technical_analysis)==null?void 0:t.volatility)==null?void 0:i.daily_range_percent))+"%",1)]}),_:1}),l(r,{label:"成交量",span:2},{default:e(()=>{var t;return[o(s(N((t=a.data.price_data)==null?void 0:t.volume)),1)]}),_:1}),l(r,{label:"20 日均量"},{default:e(()=>{var t;return[o(s(N((t=a.data.price_data)==null?void 0:t.avg_volume_20d)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(z,{gutter:16,class:"mt16"},{default:e(()=>[l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>{var t,i;return[n("div",ke,[d[2]||(d[2]=n("span",null,"技术面",-1)),(i=(t=a.data.technical_analysis)==null?void 0:t.candle)!=null&&i.type?(m(),$(p,{key:0,size:"small",type:"warning"},{default:e(()=>{var f,V;return[o(s((V=(f=a.data.technical_analysis)==null?void 0:f.candle)==null?void 0:V.type),1)]}),_:1})):B("",!0)])]}),default:e(()=>{var t,i,f,V;return[l(h,{column:2,size:"small",border:""},{default:e(()=>[l(r,{label:"短期"},{default:e(()=>{var u,c;return[o(s(((c=(u=a.data.technical_analysis)==null?void 0:u.trend)==null?void 0:c.short_term)||"-"),1)]}),_:1}),l(r,{label:"中期"},{default:e(()=>{var u,c;return[o(s(((c=(u=a.data.technical_analysis)==null?void 0:u.trend)==null?void 0:c.medium_term)||"-"),1)]}),_:1}),l(r,{label:"长期"},{default:e(()=>{var u,c;return[o(s(((c=(u=a.data.technical_analysis)==null?void 0:u.trend)==null?void 0:c.long_term)||"-"),1)]}),_:1}),l(r,{label:"备注",span:2},{default:e(()=>{var u,c;return[o(s(((c=(u=a.data.technical_analysis)==null?void 0:u.trend)==null?void 0:c.notes)||"-"),1)]}),_:1})]),_:1}),l(h,{column:3,size:"small",border:"",class:"mt8"},{default:e(()=>[l(r,{label:"MA5"},{default:e(()=>{var u,c,v;return[o(s(_((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.moving_averages)==null?void 0:v.ma5)),1)]}),_:1}),l(r,{label:"MA10"},{default:e(()=>{var u,c,v;return[o(s(_((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.moving_averages)==null?void 0:v.ma10)),1)]}),_:1}),l(r,{label:"MA20"},{default:e(()=>{var u,c,v;return[o(s(_((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.moving_averages)==null?void 0:v.ma20)),1)]}),_:1}),l(r,{label:"RSI"},{default:e(()=>{var u,c,v;return[o(s(_((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.rsi)==null?void 0:v.value)),1)]}),_:1}),l(r,{label:"MACD"},{default:e(()=>{var u,c,v;return[o(s(_((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.macd)==null?void 0:v.macd_line)),1)]}),_:1}),l(r,{label:"BOLL 位置"},{default:e(()=>{var u,c,v;return[o(s(((v=(c=(u=a.data.technical_analysis)==null?void 0:u.indicators)==null?void 0:c.bollinger_bands)==null?void 0:v.position)||"-"),1)]}),_:1})]),_:1}),J.value?(m(),S("div",he,[n("div",null,[d[3]||(d[3]=n("span",{class:"sr-title"},"支撑",-1)),(m(!0),S(M,null,H(((i=(t=a.data.technical_analysis)==null?void 0:t.support_resistance)==null?void 0:i.support)||[],(u,c)=>(m(),$(p,{key:`s${c}`,class:"mr8 mb8",type:"success",effect:"light"},{default:e(()=>[o(s(_(u.level))+" · "+s(u.strength||"-"),1)]),_:2},1024))),128))]),n("div",we,[d[4]||(d[4]=n("span",{class:"sr-title"},"阻力",-1)),(m(!0),S(M,null,H(((V=(f=a.data.technical_analysis)==null?void 0:f.support_resistance)==null?void 0:V.resistance)||[],(u,c)=>(m(),$(p,{key:`r${c}`,class:"mr8 mb8",type:"danger",effect:"light"},{default:e(()=>[o(s(_(u.level))+" · "+s(u.strength||"-"),1)]),_:2},1024))),128))])])):B("",!0)]}),_:1})]),_:1}),l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[...d[5]||(d[5]=[n("div",{class:"card-hd"},[n("span",null,"成交量分析")],-1)])]),default:e(()=>[l(h,{column:2,size:"small",border:""},{default:e(()=>[l(r,{label:"当日成交量"},{default:e(()=>{var t;return[o(s(N((t=a.data.volume_analysis)==null?void 0:t.daily_volume)),1)]}),_:1}),l(r,{label:"20 日均量"},{default:e(()=>{var t;return[o(s(N((t=a.data.volume_analysis)==null?void 0:t.avg_volume_20d)),1)]}),_:1}),l(r,{label:"趋势"},{default:e(()=>{var t;return[o(s(((t=a.data.volume_analysis)==null?void 0:t.volume_trend)||"-"),1)]}),_:1}),l(r,{label:"放量"},{default:e(()=>{var t;return[o(s((t=a.data.volume_analysis)!=null&&t.volume_spike?"是":"否"),1)]}),_:1}),l(r,{label:"解读",span:2},{default:e(()=>{var t;return[o(s(((t=a.data.volume_analysis)==null?void 0:t.interpretation)||"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(z,{gutter:16,class:"mt16"},{default:e(()=>[l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[...d[6]||(d[6]=[n("div",{class:"card-hd"},[n("span",null,"基本面")],-1)])]),default:e(()=>[l(h,{column:2,size:"small",border:""},{default:e(()=>[l(r,{label:"市值"},{default:e(()=>{var t;return[o(s(((t=a.data.fundamental_analysis)==null?void 0:t.market_cap)||"-"),1)]}),_:1}),l(r,{label:"市盈率"},{default:e(()=>{var t;return[o(s(_((t=a.data.fundamental_analysis)==null?void 0:t.pe_ratio)),1)]}),_:1}),l(r,{label:"每股收益"},{default:e(()=>{var t;return[o(s(_((t=a.data.fundamental_analysis)==null?void 0:t.eps)),1)]}),_:1}),l(r,{label:"股息率"},{default:e(()=>{var t;return[o(s(_((t=a.data.fundamental_analysis)==null?void 0:t.dividend_yield))+"%",1)]}),_:1}),l(r,{label:"营收趋势",span:2},{default:e(()=>{var t;return[o(s(((t=a.data.fundamental_analysis)==null?void 0:t.revenue_trend)||"-"),1)]}),_:1}),l(r,{label:"利润率",span:2},{default:e(()=>{var t;return[o(s(_((t=a.data.fundamental_analysis)==null?void 0:t.profit_margin)),1)]}),_:1}),l(r,{label:"备注",span:2},{default:e(()=>{var t;return[o(s(((t=a.data.fundamental_analysis)==null?void 0:t.notes)||"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[...d[7]||(d[7]=[n("div",{class:"card-hd"},[n("span",null,"新闻情绪")],-1)])]),default:e(()=>{var t;return[P.value?(m(),S("div",Ce,[(m(!0),S(M,null,H(((t=a.data.news_sentiment)==null?void 0:t.top_headlines)||[],(i,f)=>(m(),S("div",{class:"headline",key:`headline-${f}`},[l(p,{type:I(i.sentiment),size:"small"},{default:e(()=>[o(s(i.sentiment||"未知"),1)]),_:2},1032,["type"]),n("span",Se,s(i.title||"-"),1)]))),128)),l(h,{column:2,size:"small",border:"",class:"mt8"},{default:e(()=>[l(r,{label:"新闻数量"},{default:e(()=>{var i;return[o(s(((i=a.data.news_sentiment)==null?void 0:i.news_count)??"-"),1)]}),_:1}),l(r,{label:"整体情绪"},{default:e(()=>{var i;return[o(s(((i=a.data.news_sentiment)==null?void 0:i.overall_sentiment)||"-"),1)]}),_:1}),l(r,{label:"积极"},{default:e(()=>{var i;return[o(s(((i=a.data.news_sentiment)==null?void 0:i.positive)??"-"),1)]}),_:1}),l(r,{label:"中性"},{default:e(()=>{var i;return[o(s(((i=a.data.news_sentiment)==null?void 0:i.neutral)??"-"),1)]}),_:1}),l(r,{label:"消极"},{default:e(()=>{var i;return[o(s(((i=a.data.news_sentiment)==null?void 0:i.negative)??"-"),1)]}),_:1})]),_:1})])):(m(),$(E,{key:1,description:"暂无新闻数据"}))]}),_:1})]),_:1})]),_:1}),l(z,{gutter:16,class:"mt16"},{default:e(()=>[l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[...d[8]||(d[8]=[n("div",{class:"card-hd"},[n("span",null,"投资建议")],-1)])]),default:e(()=>{var t,i,f,V,u,c,v,q,W,K,j,L,X,Y,x,T,ee,le;return[n("div",Te,[n("div",$e,[d[13]||(d[13]=n("div",{class:"advice-hd"},"短线",-1)),n("div",ze,[n("p",null,s(((i=(t=a.data.investment_advice)==null?void 0:t.short_term)==null?void 0:i.strategy)||"-"),1),n("div",Ae,[d[9]||(d[9]=n("span",null,"买入区间：",-1)),(m(!0),S(M,null,H(((V=(f=a.data.investment_advice)==null?void 0:f.short_term)==null?void 0:V.buy_zone)||[],(b,k)=>(m(),$(p,{key:`sb${k}`,class:"mr8 mb8"},{default:e(()=>[o(s(_(b)),1)]),_:2},1024))),128))]),n("div",Re,[d[10]||(d[10]=n("span",null,"止盈区间：",-1)),(m(!0),S(M,null,H(((c=(u=a.data.investment_advice)==null?void 0:u.short_term)==null?void 0:c.take_profit_zone)||[],(b,k)=>(m(),$(p,{key:`sp${k}`,class:"mr8 mb8",type:"success"},{default:e(()=>[o(s(_(b)),1)]),_:2},1024))),128))]),n("div",Ee,[d[11]||(d[11]=n("span",null,"止损：",-1)),l(p,{type:"danger"},{default:e(()=>{var b,k;return[o(s(_((k=(b=a.data.investment_advice)==null?void 0:b.short_term)==null?void 0:k.stop_loss)),1)]}),_:1})]),n("div",Ve,[d[12]||(d[12]=n("span",null,"风险评级：",-1)),l(p,{type:"warning"},{default:e(()=>{var b,k;return[o(s(((k=(b=a.data.investment_advice)==null?void 0:b.short_term)==null?void 0:k.risk_level)||"-"),1)]}),_:1})])])]),n("div",De,[d[18]||(d[18]=n("div",{class:"advice-hd"},"中线",-1)),n("div",Ne,[n("p",null,s(((q=(v=a.data.investment_advice)==null?void 0:v.medium_term)==null?void 0:q.strategy)||"-"),1),n("div",Ue,[d[14]||(d[14]=n("span",null,"买入区间：",-1)),(m(!0),S(M,null,H(((K=(W=a.data.investment_advice)==null?void 0:W.medium_term)==null?void 0:K.buy_zone)||[],(b,k)=>(m(),$(p,{key:`mb${k}`,class:"mr8 mb8"},{default:e(()=>[o(s(_(b)),1)]),_:2},1024))),128))]),n("div",Fe,[d[15]||(d[15]=n("span",null,"止盈区间：",-1)),(m(!0),S(M,null,H(((L=(j=a.data.investment_advice)==null?void 0:j.medium_term)==null?void 0:L.take_profit_zone)||[],(b,k)=>(m(),$(p,{key:`mp${k}`,class:"mr8 mb8",type:"success"},{default:e(()=>[o(s(_(b)),1)]),_:2},1024))),128))]),n("div",Le,[d[16]||(d[16]=n("span",null,"止损：",-1)),l(p,{type:"danger"},{default:e(()=>{var b,k;return[o(s(_((k=(b=a.data.investment_advice)==null?void 0:b.medium_term)==null?void 0:k.stop_loss)),1)]}),_:1})]),n("div",Me,[d[17]||(d[17]=n("span",null,"风险评级：",-1)),l(p,{type:"warning"},{default:e(()=>{var b,k;return[o(s(((k=(b=a.data.investment_advice)==null?void 0:b.medium_term)==null?void 0:k.risk_level)||"-"),1)]}),_:1})])])]),n("div",He,[d[19]||(d[19]=n("div",{class:"advice-hd"},"长线",-1)),n("div",Ie,[n("p",null,s(((Y=(X=a.data.investment_advice)==null?void 0:X.long_term)==null?void 0:Y.strategy)||"-"),1),n("p",qe,s(((T=(x=a.data.investment_advice)==null?void 0:x.long_term)==null?void 0:T.risk_notes)||""),1)])])]),(ee=a.data.investment_advice)!=null&&ee.risk_warning?(m(),S("div",Be,[l(F,{title:(le=a.data.investment_advice)==null?void 0:le.risk_warning,type:"warning","show-icon":""},null,8,["title"])])):B("",!0)]}),_:1})]),_:1}),l(C,{xs:24,lg:12},{default:e(()=>[l(w,{shadow:"hover",class:"block-card"},{header:e(()=>[...d[20]||(d[20]=[n("div",{class:"card-hd"},[n("span",null,"宏观因素")],-1)])]),default:e(()=>[l(h,{column:2,size:"small",border:""},{default:e(()=>[l(r,{label:"利率"},{default:e(()=>{var t;return[o(s(_((t=a.data.macro_economic_factors)==null?void 0:t.interest_rate))+"%",1)]}),_:1}),l(r,{label:"通胀"},{default:e(()=>{var t;return[o(s(_((t=a.data.macro_economic_factors)==null?void 0:t.inflation_rate))+"%",1)]}),_:1}),l(r,{label:"市场情绪",span:2},{default:e(()=>{var t;return[o(s(((t=a.data.macro_economic_factors)==null?void 0:t.market_sentiment)||"-"),1)]}),_:1}),l(r,{label:"备注",span:2},{default:e(()=>{var t;return[o(s(((t=a.data.macro_economic_factors)==null?void 0:t.notes)||"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):B("",!0)}}}),oe=ue(Je,[["__scopeId","data-v-6860e200"]]);async function de(R){const{data:g}=await ce.post("/stocks/analysis",R);return g}async function Pe(){const{data:R}=await ce.get("/stocks/history");return R}function ie(R){if(Array.isArray(R)){const A=R.find(D=>!!(D!=null&&D.extractedJson));return(A==null?void 0:A.extractedJson)??{}}const g=R;return g&&typeof g=="object"&&"extractedJson"in g?g.extractedJson??{}:R??{}}const Oe={class:"stock-page"},Ke={key:1,class:"analysis-result"},je={class:"analysis-result__meta"},Ze={class:"dialog-header"},Ge={key:0,class:"dialog-body"},Qe={class:"dialog-meta"},We={key:1},Xe=re({__name:"StockAnalysisView",setup(R){const g=U(),A=se({stockCode:""}),D=U(!1),J=U(!1),P=U(!1),_=U(null),N=U(null),O=U([]),I=U(!1),a=U(null),d={COMPREHENSIVE:"综合分析",STRUCTURED:"结构化分析"},p=Q(()=>!a.value||a.value.analysisType!=="STRUCTURED"?null:ie(a.value.analysis)),r=se({stockCode:[{required:!0,message:"请输入股票代码",trigger:"blur"},{pattern:/^[A-Za-z]{1,10}$/,message:"仅支持 1-10 位英文字母的股票代码",trigger:"blur"}]});async function h(){if(g.value){try{await g.value.validate()}catch{return}D.value=!0;try{const t=A.stockCode.trim().toUpperCase(),i=await de({stockCode:t,analysisType:"COMPREHENSIVE"});_.value=i,A.stockCode="",Z.success(`已生成 ${i.stockCode} 的综合分析`),await E()}catch(t){Z.error(te(t))}finally{D.value=!1}}}async function w(){if(g.value){try{await g.value.validate()}catch{return}J.value=!0;try{const t=A.stockCode.trim().toUpperCase(),i=await de({stockCode:t,analysisType:"STRUCTURED"});N.value=ie(i.analysis),Z.success(`已生成 ${t} 的结构化分析`),await E()}catch(t){N.value=null,Z.error(te(t))}finally{J.value=!1}}}function C(t){a.value=t,I.value=!0}function z(){I.value=!1,a.value=null}async function E(){P.value=!0;try{O.value=await Pe()}catch(t){Z.warning(te(t))}finally{P.value=!1}}function F(t){return d[t]??t}return _e(async()=>{await E()}),(t,i)=>{const f=y("el-input"),V=y("el-form-item"),u=y("el-button"),c=y("el-form"),v=y("el-divider"),q=y("el-empty"),W=y("el-scrollbar"),K=y("el-card"),j=y("el-col"),L=y("el-table-column"),X=y("el-table"),Y=y("el-row"),x=y("el-dialog");return m(),S("div",Oe,[l(Y,{gutter:20},{default:e(()=>[l(j,{xs:24,lg:12},{default:e(()=>[l(K,{class:"form-card",shadow:"hover"},{header:e(()=>[...i[2]||(i[2]=[n("div",{class:"card-title"},"提交股票分析",-1)])]),default:e(()=>[l(c,{ref_key:"stockFormRef",ref:g,model:A,rules:r,"label-position":"top",class:"analysis-form"},{default:e(()=>[l(V,{label:"股票代码",prop:"stockCode"},{default:e(()=>[l(f,{modelValue:A.stockCode,"onUpdate:modelValue":i[0]||(i[0]=T=>A.stockCode=T),maxlength:"10",placeholder:"示例：AAPL",onKeyup:me(h,["enter"])},null,8,["modelValue"])]),_:1}),l(V,null,{default:e(()=>[l(u,{type:"primary",loading:D.value,onClick:h},{default:e(()=>[...i[3]||(i[3]=[o("综合分析",-1)])]),_:1},8,["loading"]),l(u,{class:"ml8",loading:J.value,onClick:w},{default:e(()=>[...i[4]||(i[4]=[o("结构化分析",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),l(v),n("section",null,[i[5]||(i[5]=n("h3",{class:"section-title"},"最新综合分析结果",-1)),_.value?(m(),S("div",Ke,[n("p",je,[n("strong",null,s(_.value.stockCode),1),n("span",null,s(G(ae)(_.value.requestedAt)),1)]),l(W,{class:"analysis-result__scroll"},{default:e(()=>[n("pre",null,s(G(ne)(_.value.analysis)),1)]),_:1})])):(m(),$(q,{key:0,description:"提交股票代码后将显示分析报告"}))]),l(v),n("section",null,[i[6]||(i[6]=n("h3",{class:"section-title"},"结构化速览",-1)),N.value?(m(),$(oe,{key:1,data:N.value},null,8,["data"])):(m(),$(q,{key:0,description:"执行结构化分析以查看详细信息"}))])]),_:1})]),_:1}),l(j,{xs:24,lg:12},{default:e(()=>[l(K,{class:"history-card",shadow:"hover"},{header:e(()=>[...i[7]||(i[7]=[n("div",{class:"card-title"},"近期分析记录",-1)])]),default:e(()=>[O.value.length?(m(),$(X,{key:0,data:O.value,loading:P.value,border:"",height:"520"},{default:e(()=>[l(L,{prop:"stockCode",label:"股票",width:"140"}),l(L,{prop:"analysisType",label:"类型",width:"140"},{default:e(T=>[o(s(F(T.row.analysisType)),1)]),_:1}),l(L,{label:"生成时间",width:"200"},{default:e(T=>[o(s(G(ae)(T.row.requestedAt)),1)]),_:1}),l(L,{label:"详情","min-width":"180",align:"center"},{default:e(T=>[l(u,{type:"primary",link:"",onClick:ee=>C(T.row)},{default:e(()=>[...i[8]||(i[8]=[o("查看详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","loading"])):(m(),$(q,{key:1,description:"暂无历史记录"}))]),_:1})]),_:1})]),_:1}),l(x,{modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=T=>I.value=T),width:"60%","show-close":!1,onClose:z},{header:e(()=>{var T;return[n("div",Ze,[n("span",null,"分析详情："+s((T=a.value)==null?void 0:T.stockCode),1),l(u,{text:"",type:"primary",onClick:z},{default:e(()=>[...i[9]||(i[9]=[o("关闭",-1)])]),_:1})])]}),default:e(()=>[a.value?(m(),S("div",Ge,[n("p",Qe,s(F(a.value.analysisType))+" · "+s(G(ae)(a.value.requestedAt)),1),a.value.analysisType==="STRUCTURED"&&p.value?(m(),$(oe,{key:0,data:p.value},null,8,["data"])):(m(),S("pre",We,s(G(ne)(a.value.analysis)),1))])):B("",!0)]),_:1},8,["modelValue"])])}}}),aa=ue(Xe,[["__scopeId","data-v-72ed5f84"]]);export{aa as default};
