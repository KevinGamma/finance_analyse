import{d as $,a as M,r as d,n as z,c as y,o as c,b as t,w as a,e as n,f as m,m as b,p as B,t as D,l as E,g as T,F as A,q as F,h as I,E as p,_ as L}from"./index-ONXd2yip.js";import{K as U}from"./KLineChart-Bpe7rvZr.js";import{f as R,m as j}from"./stockAnalysis-72SBhG5I.js";import{e as q}from"./errors-BvGLt0H_.js";const H={class:"stock-kline"},P={class:"kline-card-header"},Y={class:"left"},Z={key:0,class:"kline-meta"},G={class:"kline-body"},J=$({__name:"StockKlineView",setup(O){const k=[{label:"1分钟",value:"1min"},{label:"5分钟",value:"5min"},{label:"15分钟",value:"15min"},{label:"30分钟",value:"30min"},{label:"60分钟",value:"60min"}],r=M({symbol:"",interval:"1min"}),_=d(!1),i=d([]),f=d(null),v=d(null),g=z(()=>{const l=[];return f.value&&l.push("最后刷新："+w(f.value)),v.value&&l.push("时区："+v.value),l.join(" | ")});function w(l){const e=new Date(l.replace(" ","T"));if(Number.isNaN(e.getTime()))return l;const o=u=>String(u).padStart(2,"0");return`${e.getFullYear()}-${o(e.getMonth()+1)}-${o(e.getDate())} ${o(e.getHours())}:${o(e.getMinutes())}:${o(e.getSeconds())}`}async function h(){const l=r.symbol.trim().toUpperCase();if(!l){p.warning("请输入股票代码");return}if(!/^[A-Za-z.\-]{1,20}$/.test(l)){p.warning("股票代码格式不正确");return}_.value=!0;try{const e=await R(l,r.interval);f.value=e.lastRefreshed??null,v.value=e.timezone??null,i.value=j(e),i.value.length||p.info("未获取到该区间的K线数据")}catch(e){i.value=[],p.error(q(e))}finally{_.value=!1}}return(l,e)=>{const o=n("el-input"),u=n("el-form-item"),V=n("el-option"),K=n("el-select"),x=n("el-button"),C=n("el-form"),S=n("el-empty"),N=n("el-card");return c(),y("div",H,[t(N,{class:"kline-card",shadow:"hover"},{header:a(()=>[m("div",P,[m("div",Y,[e[3]||(e[3]=m("h3",{class:"card-title"},"K线图查看",-1)),g.value?(c(),y("p",Z,D(g.value),1)):B("",!0)]),t(C,{class:"kline-form",inline:"",size:"small",onSubmit:e[2]||(e[2]=E(()=>{},["prevent"]))},{default:a(()=>[t(u,null,{default:a(()=>[t(o,{modelValue:r.symbol,"onUpdate:modelValue":e[0]||(e[0]=s=>r.symbol=s),maxlength:"10",placeholder:"示例：AAPL",onKeyup:T(h,["enter"])},null,8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(K,{modelValue:r.interval,"onUpdate:modelValue":e[1]||(e[1]=s=>r.interval=s),placeholder:"时间间隔",style:{width:"120px"}},{default:a(()=>[(c(),y(A,null,F(k,s=>t(V,{key:s.value,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(x,{type:"primary",loading:_.value,onClick:h},{default:a(()=>[...e[4]||(e[4]=[I("获取K线",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})])]),default:a(()=>[m("div",G,[i.value.length?(c(),b(U,{key:0,candles:i.value,height:560},null,8,["candles"])):(c(),b(S,{key:1,description:"请输入股票代码并选择时间间隔以查看K线图"}))])]),_:1})])}}}),le=L(J,[["__scopeId","data-v-228f4028"]]);export{le as default};
